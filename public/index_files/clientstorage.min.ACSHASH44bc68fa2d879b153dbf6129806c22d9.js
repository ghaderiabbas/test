!function(a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).store=a()}(function(){return function(){function a(d,h,g){function b(f,e){if(!h[f]){if(!d[f]){var p="function"==typeof require&&require;if(!e&&p)return p(f,!0);if(c)return c(f,!0);e=Error("Cannot find module '"+f+"'");throw e.code="MODULE_NOT_FOUND",e;}e=h[f]=
{exports:{}};d[f][0].call(e.exports,function(e){return b(d[f][1][e]||e)},e,e.exports,a,d,h,g)}return h[f].exports}for(var c="function"==typeof require&&require,f=0;f<g.length;f++)b(g[f]);return b}return a}()({1:[function(a,d,h){h=a("../src/store-engine");var g=[a("../storages/localStorage"),a("../storages/sessionStorage"),a("../storages/cookieStorage"),a("../storages/memoryStorage")];a=[a("../plugins/dump"),a("../plugins/events"),a("../plugins/observe"),a("../plugins/expire")];d.exports=h.createStore(g,
a)},{"../plugins/dump":2,"../plugins/events":3,"../plugins/expire":4,"../plugins/observe":5,"../src/store-engine":6,"../storages/cookieStorage":8,"../storages/localStorage":9,"../storages/memoryStorage":10,"../storages/sessionStorage":11}],2:[function(a,d,h){d.exports=function(){return{dump:function(a){var b={};return this.each(function(c,a){b[a]=c}),b}}}},{}],3:[function(a,d,h){a=a("../src/util");var g=a.bind,b=a.each,c=a.create,f=a.slice;d.exports=function(){var e=c(l,{_id:0,_subSignals:{},_subCallbacks:{}});
return{watch:function(a,c,k){return e.on(c,g(this,k))},unwatch:function(a,c){e.off(c)},once:function(c,a,k){e.once(a,g(this,k))},set:function(a,c,k){var b=this.get(c);a();e.fire(c,k,b)},remove:function(c,a){var k=this.get(a);c();e.fire(a,void 0,k)},clearAll:function(a){var c={};this.each(function(a,e){c[e]=a});a();b(c,function(a,c){e.fire(c,void 0,a)})}}};var l={_id:null,_subCallbacks:null,_subSignals:null,on:function(a,c){return this._subCallbacks[a]||(this._subCallbacks[a]={}),this._id+=1,this._subCallbacks[a][this._id]=
c,this._subSignals[this._id]=a,this._id},off:function(a){delete this._subCallbacks[this._subSignals[a]][a];delete this._subSignals[a]},once:function(a,c){var b=this.on(a,g(this,function(){c.apply(this,arguments);this.off(b)}))},fire:function(a){var c=f(arguments,1);b(this._subCallbacks[a],function(a){a.apply(this,c)})}}},{"../src/util":7}],4:[function(a,d,h){d.exports=function(){function a(a){b.get(a,Number.MAX_VALUE)<=(new Date).getTime()&&(this.raw.remove(a),b.remove(a))}var b=this.createStore(this.storage,
null,this._namespacePrefix+"expire_mixin");return{set:function(a,f,g,e){return this.hasNamespace("expire_mixin")||b.set(f,e),a()},get:function(c,b){return this.hasNamespace("expire_mixin")||a.call(this,b),c()},remove:function(a,f){return this.hasNamespace("expire_mixin")||b.remove(f),a()},getExpiration:function(a,f){return b.get(f)},removeExpiredKeys:function(c){var b=[];this.each(function(a,c){b.push(c)});for(c=0;c<b.length;c++)a.call(this,b[c])}}}},{}],5:[function(a,d,h){a=a("./events");d.exports=
[a,function(){return{observe:function(a,b,c){a=this.watch(b,c);return c(this.get(b)),a},unobserve:function(a,b){this.unwatch(b)}}}]},{"./events":3}],6:[function(a,d,h){function g(){var a="undefined"==typeof console?null:console;a&&(a.warn?a.warn:a.log).apply(a,arguments)}function b(a,b,d){d||(d="");a&&!n(a)&&(a=[a]);b&&!n(b)&&(b=[b]);var q=d?"__storejs_"+d+"_":"",h=d?new RegExp("^"+q):null;if(!/^[a-zA-Z0-9_\-]*$/.test(d))throw Error("store.js namespaces can only have alphanumerics + underscores and dashes");
var m=p({_namespacePrefix:q,_namespaceRegexp:h,_testStorage:function(a){try{a.write("__storejs__test__","__storejs__test__");var b="__storejs__test__"===a.read("__storejs__test__");return a.remove("__storejs__test__"),b}catch(u){return!1}},_assignPluginFnProp:function(a,b){var k=this[b];this[b]=function(){var b=c(arguments,0),e=this,f=[function(){if(k)return l(arguments,function(a,c){b[c]=a}),k.apply(e,b)}].concat(b);return a.apply(e,f)}},_serialize:function(a){return JSON.stringify(a)},_deserialize:function(a,
b){if(!a)return b;var c="";try{c=JSON.parse(a)}catch(v){c=a}return void 0!==c?c:b},_addStorage:function(a){this.enabled||this._testStorage(a)&&(this.storage=a,this.enabled=!0)},_addPlugin:function(a){var b=this;if(n(a))return void l(a,function(a){b._addPlugin(a)});if(!f(this.plugins,function(b){return a===b})){if(this.plugins.push(a),!k(a))throw Error("Plugins must be function values that return objects");var c=a.call(this);if(!r(c))throw Error("Plugins must return an object of function properties");
l(c,function(c,e){if(!k(c))throw Error("Bad plugin property: "+e+" from plugin "+a.name+". Plugins should only return functions.");b._assignPluginFnProp(c,e)})}},addStorage:function(a){g("store.addStorage(storage) is deprecated. Use createStore([storages])");this._addStorage(a)}},t,{plugins:[]});return m.raw={},l(m,function(a,b){k(a)&&(m.raw[b]=e(m,a))}),l(a,function(a){m._addStorage(a)}),l(b,function(a){m._addPlugin(a)}),m}a=a("./util");var c=a.slice,f=a.pluck,l=a.each,e=a.bind,p=a.create,n=a.isList,
k=a.isFunction,r=a.isObject;d.exports={createStore:b};var t={version:"2.0.12",enabled:!1,get:function(a,b){a=this.storage.read(this._namespacePrefix+a);return this._deserialize(a,b)},set:function(a,b){return void 0===b?this.remove(a):(this.storage.write(this._namespacePrefix+a,this._serialize(b)),b)},remove:function(a){this.storage.remove(this._namespacePrefix+a)},each:function(a){var b=this;this.storage.each(function(c,k){a.call(b,b._deserialize(c),(k||"").replace(b._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},
hasNamespace:function(a){return this._namespacePrefix=="__storejs_"+a+"_"},createStore:function(){return b.apply(this,arguments)},addPlugin:function(a){this._addPlugin(a)},namespace:function(a){return b(this.storage,this.plugins,a)}}},{"./util":7}],7:[function(a,d,h){(function(a){function b(a,b){return Array.prototype.slice.call(a,b||0)}function c(a,b){f(a,function(a,c){return b(a,c),!1})}function f(a,b){if(g(a))for(var c=0;c<a.length;c++){if(b(a[c],c))return a[c]}else for(c in a)if(a.hasOwnProperty(c)&&
b(a[c],c))return a[c]}function g(a){return null!=a&&"function"!=typeof a&&"number"==typeof a.length}var e=function(){return Object.assign?Object.assign:function(a,b,e,f){for(var k=1;k<arguments.length;k++)c(Object(arguments[k]),function(b,c){a[c]=b});return a}}(),h=function(){if(Object.create)return function(a,c,f,k){var d=b(arguments,1);return e.apply(this,[Object.create(a)].concat(d))};var a=function(){};return function(c,f,k,d){var g=b(arguments,1);return a.prototype=c,e.apply(this,[new a].concat(g))}}(),
n=function(){return String.prototype.trim?function(a){return String.prototype.trim.call(a)}:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}();d.exports={assign:e,create:h,trim:n,bind:function(a,b){return function(){return b.apply(a,Array.prototype.slice.call(arguments,0))}},slice:b,each:c,map:function(a,b){var c=g(a)?[]:{};return f(a,function(a,e){return c[e]=b(a,e),!1}),c},pluck:f,isList:g,isFunction:function(a){return a&&"[object Function]"==={}.toString.call(a)},isObject:function(a){return a&&
"[object Object]"==={}.toString.call(a)},Global:"undefined"!=typeof window?window:a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(a,d,h){function g(a){for(var b=l.cookie.split(/; ?/g),c=b.length-1;0<=c;c--)if(f(b[c])){var e=b[c].split("\x3d"),d=unescape(e[0]);e=unescape(e[1]);a(e,d)}}function b(a){a&&c(a)&&(l.cookie=escape(a)+"\x3d; expires\x3dThu, 01 Jan 1970 00:00:00 GMT; path\x3d/")}function c(a){return(new RegExp("(?:^|;\\s*)"+
escape(a).replace(/[\-\.\+\*]/g,"\\$\x26")+"\\s*\\\x3d")).test(l.cookie)}a=a("../src/util");h=a.Global;var f=a.trim;d.exports={name:"cookieStorage",read:function(a){if(!a||!c(a))return null;a="(?:^|.*;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$\x26")+"\\s*\\\x3d\\s*((?:[^;](?!;))*[^;]?).*";return unescape(l.cookie.replace(new RegExp(a),"$1"))},write:function(a,b){a&&(l.cookie=escape(a)+"\x3d"+escape(b)+"; expires\x3dTue, 19 Jan 2038 03:14:07 GMT; path\x3d/")},each:g,remove:b,clearAll:function(){g(function(a,
c){b(c)})}};var l=h.document},{"../src/util":7}],9:[function(a,d,h){function g(a){return b.localStorage.getItem(a)}var b=a("../src/util").Global;d.exports={name:"localStorage",read:g,write:function(a,f){return b.localStorage.setItem(a,f)},each:function(a){for(var c=b.localStorage.length-1;0<=c;c--){var d=b.localStorage.key(c);a(g(d),d)}},remove:function(a){return b.localStorage.removeItem(a)},clearAll:function(){return b.localStorage.clear()}}},{"../src/util":7}],10:[function(a,d,h){d.exports={name:"memoryStorage",
read:function(a){return g[a]},write:function(a,c){g[a]=c},each:function(a){for(var b in g)g.hasOwnProperty(b)&&a(g[b],b)},remove:function(a){delete g[a]},clearAll:function(a){g={}}};var g={}},{}],11:[function(a,d,h){function g(a){return b.sessionStorage.getItem(a)}var b=a("../src/util").Global;d.exports={name:"sessionStorage",read:g,write:function(a,f){return b.sessionStorage.setItem(a,f)},each:function(a){for(var c=b.sessionStorage.length-1;0<=c;c--){var d=b.sessionStorage.key(c);a(g(d),d)}},remove:function(a){return b.sessionStorage.removeItem(a)},
clearAll:function(){return b.sessionStorage.clear()}}},{"../src/util":7}]},{},[1])(1)});